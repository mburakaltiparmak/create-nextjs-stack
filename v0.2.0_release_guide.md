# create-nextjs-stack v0.2.0 â€” YayÄ±n Ã–ncesi GeliÅŸtirme Rehberi

> **AmaÃ§:** Bu dokÃ¼man, `create-nextjs-stack` paketinin 0.2.0 sÃ¼rÃ¼mÃ¼ Ã¶ncesinde tamamlanmasÄ± gereken geliÅŸtirmeleri, npm best practice'lerine ve kaliteli paketlerin yapÄ±sÄ±na gÃ¶re detaylÄ± ÅŸekilde aÃ§Ä±klar. Hem developer hem de AI agent'lar iÃ§in rehber niteliÄŸindedir.
>
> **Mevcut sÃ¼rÃ¼m:** 0.1.9  
> **Hedef sÃ¼rÃ¼m:** 0.2.0  
> **Tarih:** 2026-02-28

---

## Ä°Ã§indekiler

1. [Kritik: Node.js Engine UyumsuzluÄŸu](#1-kritik-nodejs-engine-uyumsuzluÄŸu)
2. [Gereksiz .env DeÄŸiÅŸkenlerini Temizleme](#2-gereksiz-env-deÄŸiÅŸkenlerini-temizleme)
3. [Template package-lock.json DosyalarÄ±nÄ± Repodan KaldÄ±rma](#3-template-package-lockjson-dosyalarÄ±nÄ±-repodan-kaldÄ±rma)
4. [Scaffold SonrasÄ± Otomatik Install ve Paket YÃ¶neticisi SeÃ§imi](#4-scaffold-sonrasÄ±-otomatik-install-ve-paket-yÃ¶neticisi-seÃ§imi)
5. [Root package.json Modernizasyonu](#5-root-packagejson-modernizasyonu)
6. [CONTRIBUTING.md Ekleme](#6-contributingmd-ekleme)
7. [Zod 3/4 Versiyon Ã‡akÄ±ÅŸmasÄ±nÄ± Ã‡Ã¶zme](#7-zod-34-versiyon-Ã§akÄ±ÅŸmasÄ±nÄ±-Ã§Ã¶zme)
8. [CLI Error Handling Ä°yileÅŸtirmeleri](#8-cli-error-handling-iÌ‡yileÅŸtirmeleri)
9. [Template'lere engines AlanÄ± Ekleme](#9-templatelere-engines-alanÄ±-ekleme)
10. [redux-logger Dependency TutarsÄ±zlÄ±ÄŸÄ±](#10-redux-logger-dependency-tutarsÄ±zlÄ±ÄŸÄ±)
11. [LICENSE DosyasÄ± DoÄŸrulamasÄ±](#11-license-dosyasÄ±-doÄŸrulamasÄ±)
12. [GitHub Issue ve PR Template'leri](#12-github-issue-ve-pr-templateleri)
13. [DoÄŸrulama Checklist'i](#13-doÄŸrulama-checklisti)

---

## 1. Kritik: Node.js Engine UyumsuzluÄŸu

### Sorun

Root `package.json` â†’ `"engines": { "node": ">=18.0.0" }` belirtilmiÅŸ, ancak web template'inin dependency zincirinde `resend` paketi `"engines": { "node": ">=20" }` gerektiriyor. AyrÄ±ca Supabase alt paketleri (`@supabase/auth-js`, `@supabase/functions-js`, `@supabase/postgrest-js`, `@supabase/storage-js`) da `"engines": { "node": ">=20.0.0" }` belirtiyor.

Bu durumda Node.js 18 kullanan bir kullanÄ±cÄ± `npx create-nextjs-stack my-app` ile scaffold edip `npm install` Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nda Ã§eÅŸitli uyarÄ±lar ve potansiyel runtime hatalarÄ± alÄ±r.

### Ã‡Ã¶zÃ¼m

**SeÃ§enek A (Ã–nerilen):** Root CLI paketinin `engines` alanÄ±nÄ± `>=20.0.0` olarak gÃ¼ncellemek.

```jsonc
// package.json (root)
{
  "engines": {
    "node": ">=20.0.0",
  },
}
```

**SeÃ§enek B:** CLI'nin kendisi Node 18'de Ã§alÄ±ÅŸmaya devam edebilir ancak scaffold baÅŸlamadan Ã¶nce kullanÄ±cÄ±ya uyarÄ± gÃ¶stermek.

```js
// bin/cli.js â€” action callback'inin baÅŸÄ±na ekle
const nodeVersion = parseInt(process.versions.node.split(".")[0], 10);
if (nodeVersion < 20) {
  console.log(
    chalk.yellow(
      "\nâš  Warning: The generated templates require Node.js >= 20.\n" +
        "  Your current version: " +
        process.versions.node +
        "\n",
    ),
  );
}
```

### YapÄ±lacaklar

- [ ] Root `package.json` â†’ `engines.node` alanÄ±nÄ± `">=20.0.0"` olarak gÃ¼ncelle
- [ ] README.md'deki Prerequisites tablosunu gÃ¼ncelle (`Node.js 18.x` â†’ `Node.js 20.x`)
- [ ] CI workflow'da Node 18.x'i matrix'ten kaldÄ±r, `[20.x, 22.x]` olarak gÃ¼ncelle
- [ ] Web template README'deki Prerequisites bÃ¶lÃ¼mÃ¼nÃ¼ gÃ¼ncelle

### Etkilenen Dosyalar

```
package.json                      â†’ engines
README.md                         â†’ Prerequisites tablosu
.github/workflows/ci.yml          â†’ matrix.node-version
templates/web/README.md           â†’ Prerequisites
```

---

## 2. Gereksiz .env DeÄŸiÅŸkenlerini Temizleme

### Sorun

`templates/web/.env.example` dosyasÄ±nda template kodunda kullanÄ±lmayan eski/client-specific deÄŸiÅŸkenler var. Bu durum kullanÄ±cÄ±yÄ± "hangi deÄŸiÅŸkenleri doldurmalÄ±yÄ±m?" sorusuyla baÅŸ baÅŸa bÄ±rakÄ±yor.

Gereksiz deÄŸiÅŸkenler:

| DeÄŸiÅŸken                     | Neden Gereksiz                                                                                   |
| ---------------------------- | ------------------------------------------------------------------------------------------------ |
| `SUPABASE_DATABASE_PASSWORD` | Uygulama kodunda kullanÄ±lmÄ±yor; Supabase CLI/migration aracÄ±na Ã¶zel                              |
| `SUPABASE_PROJECT_NAME`      | Uygulama kodunda kullanÄ±lmÄ±yor; sadece Supabase Dashboard'da bilgi amaÃ§lÄ±                        |
| `SUPABASE_PROJECT_ID`        | Uygulama kodunda kullanÄ±lmÄ±yor; Supabase CLI'a Ã¶zel                                              |
| `SUPABASE_PUBLISHABLE_KEY`   | Standart Supabase SDK'da bÃ¶yle bir key yok; muhtemelen `ANON_KEY` ile aynÄ± ÅŸey                   |
| `SUPABASE_SECRET_KEY`        | Standart isimlendirme `SUPABASE_SERVICE_ROLE_KEY`; ikisi muhtemelen aynÄ±                         |
| `CLOUDINARY_ID`              | `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME` ile aynÄ±; template kodunda hangisinin kullanÄ±ldÄ±ÄŸÄ±nÄ± doÄŸrula |

### Ã‡Ã¶zÃ¼m

`templates/web/.env.example` dosyasÄ±nÄ± sadece gerÃ§ekten kullanÄ±lan deÄŸiÅŸkenlere indirge. DeÄŸiÅŸkenleri kategorize et ve her birinin ne olduÄŸunu aÃ§Ä±klayan yorumlar ekle. Admin template ile tutarlÄ±lÄ±k saÄŸla.

### Hedef YapÄ± â€” `templates/web/.env.example`

```bash
# â”€â”€â”€ Supabase â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# https://supabase.com â†’ Project Settings â†’ API
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# â”€â”€â”€ Email (Resend) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# https://resend.com â†’ API Keys
RESEND_API_KEY=your_resend_api_key_here
RESEND_FROM_EMAIL=hello@yourdomain.com

# â”€â”€â”€ Cloudinary â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# https://cloudinary.com â†’ Dashboard
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloud_name_here
CLOUDINARY_API_KEY=your_cloudinary_api_key_here
CLOUDINARY_API_SECRET=your_cloudinary_api_secret_here
CLOUDINARY_URL=cloudinary://your_api_key:your_api_secret@your_cloud_name

# â”€â”€â”€ Site â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NEXT_PUBLIC_SITE_URL=http://localhost:3000
NEXT_PUBLIC_GA_ID=your_google_analytics_id_here

# â”€â”€â”€ Revalidation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
REVALIDATION_SECRET=your_random_secret_string_here
```

### YapÄ±lacaklar

- [ ] Template kaynak kodunu tara (`grep -r "SUPABASE_DATABASE_PASSWORD\|SUPABASE_PROJECT_NAME\|SUPABASE_PROJECT_ID\|SUPABASE_PUBLISHABLE_KEY\|SUPABASE_SECRET_KEY\|CLOUDINARY_ID" templates/web/src/`) â†’ gerÃ§ekten kullanÄ±lan mÄ± doÄŸrula
- [ ] EÄŸer herhangi bir kod bu deÄŸiÅŸkenleri kullanÄ±yorsa, kodu gÃ¼ncelle (standart isimlendirmeye geÃ§ir)
- [ ] `templates/web/.env.example` dosyasÄ±nÄ± yukarÄ±daki hedef yapÄ±ya gÃ¶re gÃ¼ncelle
- [ ] `REVALIDATION_SECRET` kullanÄ±lÄ±yorsa kalsÄ±n, kullanÄ±lmÄ±yorsa kaldÄ±r
- [ ] `CLOUDINARY_ID` kullanÄ±lÄ±yorsa `NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME` ile birleÅŸtir
- [ ] README.md'deki Environment Variables bÃ¶lÃ¼mÃ¼nÃ¼ gÃ¼ncelle

### Etkilenen Dosyalar

```
templates/web/.env.example
templates/web/src/**/*          â†’ env kullanan dosyalar
README.md                       â†’ Environment Variables bÃ¶lÃ¼mÃ¼
```

---

## 3. Template package-lock.json DosyalarÄ±nÄ± Repodan KaldÄ±rma

### Sorun

`templates/web/package-lock.json` ve `templates/admin/package-lock.json` dosyalarÄ± repo'da mevcut. Bu dosyalar:

- Repo boyutunu gereksiz yere ÅŸiÅŸiriyor (her biri yÃ¼zlerce KB)
- Scaffold sÄ±rasÄ±nda zaten filtreleniyor (CLI'nin `filter` fonksiyonu `package-lock.json` adÄ±nÄ± atlÄ±yor)
- KullanÄ±cÄ± `npm install` Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nda kendi ortamÄ±na uygun yeni bir lock dosyasÄ± oluÅŸacak
- npm publish sÄ±rasÄ±nda `.npmignore` tarafÄ±ndan zaten hariÃ§ tutuluyor

### Ã‡Ã¶zÃ¼m

```bash
# 1. Git'ten kaldÄ±r (dosya sisteminden de silinir)
git rm templates/web/package-lock.json
git rm templates/admin/package-lock.json

# 2. Template .gitignore dosyalarÄ±na ekle (zaten mevcut olabilir, kontrol et)
# templates/web/.gitignore ve templates/admin/.gitignore dosyalarÄ±nda
# "package-lock.json" satÄ±rÄ± yoksa ekle
```

### YapÄ±lacaklar

- [ ] `templates/web/package-lock.json` â†’ `git rm`
- [ ] `templates/admin/package-lock.json` â†’ `git rm`
- [ ] Her iki template'in `.gitignore` dosyasÄ±nda `package-lock.json` satÄ±rÄ±nÄ±n olduÄŸunu doÄŸrula
- [ ] Root `.gitignore`'a `templates/*/package-lock.json` ekle (ileride kazara eklenmesini Ã¶nlemek iÃ§in)

### Etkilenen Dosyalar

```
templates/web/package-lock.json       â†’ SÄ°L
templates/admin/package-lock.json     â†’ SÄ°L
.gitignore                            â†’ satÄ±r ekle
```

---

## 4. Scaffold SonrasÄ± Otomatik Install ve Paket YÃ¶neticisi SeÃ§imi

### Sorun

Mevcut CLI scaffold sonrasÄ± sadece "Next steps" yazdÄ±rÄ±yor. Kaliteli scaffold araÃ§larÄ± (`create-next-app`, `create-vite`, `create-t3-app`) kullanÄ±cÄ±ya paket yÃ¶neticisi seÃ§imi sunuyor ve baÄŸÄ±mlÄ±lÄ±klarÄ± otomatik yÃ¼klÃ¼yor.

### Ã‡Ã¶zÃ¼m

`bin/cli.js`'e scaffold sonrasÄ± iki yeni aÅŸama ekle:

1. Paket yÃ¶neticisi algÄ±lama (npm/yarn/pnpm/bun)
2. Otomatik baÄŸÄ±mlÄ±lÄ±k kurulumu (opsiyonel onay ile)

### Paket YÃ¶neticisi AlgÄ±lama Fonksiyonu

```js
// bin/cli.js â€” Ã¼st tarafa ekle
const { execSync } = require("child_process");

/**
 * KullanÄ±cÄ±nÄ±n hangi paket yÃ¶neticisiyle komutu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±nÄ± tespit eder.
 * npm_config_user_agent ortam deÄŸiÅŸkeni "npm/10.x.x", "yarn/1.x.x" vb. iÃ§erir.
 * Bulunamazsa fallback olarak prompts ile sorar.
 */
function detectPackageManager() {
  const userAgent = process.env.npm_config_user_agent || "";
  if (userAgent.startsWith("yarn")) return "yarn";
  if (userAgent.startsWith("pnpm")) return "pnpm";
  if (userAgent.startsWith("bun")) return "bun";
  return "npm";
}

/**
 * Verilen paket yÃ¶neticisinin sistemde kurulu olup olmadÄ±ÄŸÄ±nÄ± kontrol eder.
 */
function isPackageManagerAvailable(pm) {
  try {
    execSync(`${pm} --version`, { stdio: "ignore" });
    return true;
  } catch {
    return false;
  }
}
```

### Install AkÄ±ÅŸÄ± â€” scaffold baÅŸarÄ±lÄ± olduktan sonra (spinner.succeed'den sonra)

```js
// Scaffold tamamlandÄ±ktan sonra, spinner.succeed("Scaffolding complete!") satÄ±rÄ±ndan sonra:

// Paket yÃ¶neticisi seÃ§imi
const detectedPm = detectPackageManager();

const { packageManager } = await prompts({
  type: "select",
  name: "packageManager",
  message: "Which package manager would you like to use?",
  choices: [
    { title: "npm", value: "npm" },
    { title: "yarn", value: "yarn" },
    { title: "pnpm", value: "pnpm" },
    { title: "bun", value: "bun" },
  ].filter((choice) => isPackageManagerAvailable(choice.value)),
  initial: ["npm", "yarn", "pnpm", "bun"].indexOf(detectedPm),
});

if (packageManager) {
  const { shouldInstall } = await prompts({
    type: "confirm",
    name: "shouldInstall",
    message: `Install dependencies with ${packageManager}?`,
    initial: true,
  });

  if (shouldInstall) {
    const installTargets =
      templateType === "full-stack"
        ? [path.join(root, "web"), path.join(root, "admin")]
        : [root];

    for (const target of installTargets) {
      const dirName = path.basename(target);
      const installSpinner = ora(
        `Installing dependencies in ${dirName}...`,
      ).start();

      try {
        const installCmd =
          packageManager === "yarn" ? "yarn" : `${packageManager} install`;

        execSync(installCmd, {
          cwd: target,
          stdio: "pipe",
        });

        installSpinner.succeed(`Dependencies installed in ${dirName}`);
      } catch (error) {
        installSpinner.fail(`Failed to install dependencies in ${dirName}`);
        console.log(
          chalk.yellow(
            `  You can install manually: cd ${dirName} && ${packageManager} install`,
          ),
        );
      }
    }
  }
}
```

### "Next steps" Ã‡Ä±ktÄ±sÄ±nÄ± GÃ¼ncelleme

Install otomatik yapÄ±ldÄ±ysa "npm install" adÄ±mÄ±nÄ± atla:

```js
console.log(`\n${chalk.green("Success!")} Created project at ${root}\n`);
console.log("Next steps:");
console.log(chalk.cyan(`  cd ${appName}`));

if (templateType === "full-stack") {
  console.log("  Then go to either web or admin folder:");
  console.log(chalk.cyan(`  cd web`));
  if (!shouldInstall) {
    console.log(chalk.cyan(`  ${packageManager || "npm"} install`));
  }
  console.log(chalk.cyan(`  ${packageManager || "npm"} run dev`));
} else {
  if (!shouldInstall) {
    console.log(chalk.cyan(`  ${packageManager || "npm"} install`));
  }
  console.log(chalk.cyan(`  ${packageManager || "npm"} run dev`));
}
```

### YapÄ±lacaklar

- [ ] `detectPackageManager()` fonksiyonunu `bin/cli.js`'e ekle
- [ ] `isPackageManagerAvailable()` fonksiyonunu `bin/cli.js`'e ekle
- [ ] Scaffold sonrasÄ±na paket yÃ¶neticisi seÃ§im prompt'u ekle
- [ ] Otomatik install akÄ±ÅŸÄ±nÄ± ekle (full-stack iÃ§in her iki dizin)
- [ ] "Next steps" Ã§Ä±ktÄ±sÄ±nÄ± koÅŸullu olarak gÃ¼ncelle
- [ ] KullanÄ±cÄ± Ctrl+C ile iptal ederse graceful exit yap
- [ ] Test: `npm test` ile mevcut testlerin hÃ¢lÃ¢ geÃ§tiÄŸini doÄŸrula (testler `--template` flag'i ile non-interactive Ã§alÄ±ÅŸÄ±yor, install prompt'u atlanmalÄ±)

### Etkilenen Dosyalar

```
bin/cli.js        â†’ ana deÄŸiÅŸiklik
```

---

## 5. Root package.json Modernizasyonu

### Sorun

Root `package.json`'da modern npm paketleri iÃ§in standart sayÄ±lan bazÄ± alanlar eksik.

### Ã‡Ã¶zÃ¼m

AÅŸaÄŸÄ±daki alanlarÄ± ekle:

```jsonc
// package.json
{
  "name": "create-nextjs-stack",
  "version": "0.2.0",
  "description": "CLI to scaffold Next.js Landing Page and Supabase Admin Panel",
  "type": "commonjs", // â† YENÄ°: AÃ§Ä±kÃ§a CJS olduÄŸunu belirt
  "bin": {
    "create-nextjs-stack": "./bin/cli.js",
  },
  "files": ["bin", "templates"],
  "exports": {
    // â† YENÄ°: Modern package resolution
    ".": "./bin/cli.js",
  },
  "scripts": {
    "test": "vitest run",
  },
  "engines": {
    "node": ">=20.0.0", // â† GÃœNCELLENDÄ°: bkz. Madde 1
  },
  "keywords": [
    "nextjs",
    "next",
    "starter",
    "template",
    "scaffold",
    "cli",
    "create",
    "supabase",
    "admin",
    "tailwind",
    "typescript",
    "react",
    "boilerplate",
  ],
  // ... diÄŸer alanlar aynÄ±
}
```

### Detaylar

**`"type": "commonjs"`** â€” Node.js zaten `.js` dosyalarÄ±nÄ± CJS olarak yorumluyor ama bunu aÃ§Ä±kÃ§a belirtmek hem netlik saÄŸlar hem de tooling'in (ESLint, bundler'lar) doÄŸru modda Ã§alÄ±ÅŸmasÄ±nÄ± garanti eder.

**`"exports"`** â€” `exports` field'Ä± modern Node.js resolution'Ä±n temel taÅŸÄ±dÄ±r. CLI paketleri iÃ§in zorunlu olmasa da paket olgunluÄŸunu gÃ¶sterir ve ileride programmatic API eklemek istersen temel altyapÄ±yÄ± hazÄ±rlamÄ±ÅŸ olursun.

**`keywords` geniÅŸletme** â€” npm arama sonuÃ§larÄ±nda gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ artÄ±rÄ±r. "boilerplate", "scaffold", "create", "tailwind", "typescript" gibi yaygÄ±n aranan terimleri ekle.

### YapÄ±lacaklar

- [ ] `"type": "commonjs"` ekle
- [ ] `"exports": { ".": "./bin/cli.js" }` ekle
- [ ] `"engines.node"` â†’ `">=20.0.0"` gÃ¼ncelle
- [ ] `keywords` dizisini geniÅŸlet
- [ ] `version` â†’ `"0.2.0"` olarak gÃ¼ncelle (release commit'inde)

### Etkilenen Dosyalar

```
package.json
```

---

## 6. CONTRIBUTING.md Ekleme

### Sorun

README.md'de bir contributing bÃ¶lÃ¼mÃ¼ var ama baÄŸÄ±msÄ±z `CONTRIBUTING.md` dosyasÄ± eksik. GitHub, PR aÃ§an kiÅŸilere bu dosyayÄ± otomatik gÃ¶sterir. Ciddi aÃ§Ä±k kaynak projelerinde standart bir beklentidir.

### Ã‡Ã¶zÃ¼m

Root dizine `CONTRIBUTING.md` oluÅŸtur:

````markdown
# Contributing to create-nextjs-stack

KatkÄ±larÄ±nÄ±z, hata raporlarÄ±nÄ±z ve Ã¶zellik istekleriniz memnuniyetle karÅŸÄ±lanÄ±r!

## GeliÅŸtirme OrtamÄ±nÄ± Kurma

1. Repository'yi fork edin
2. Fork'unuzu klonlayÄ±n:
   ```bash
   git clone https://github.com/YOUR_USERNAME/create-nextjs-stack.git
   cd create-nextjs-stack
   ```
````

3. BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kleyin:
   ```bash
   npm install
   ```
4. Testleri Ã§alÄ±ÅŸtÄ±rarak her ÅŸeyin dÃ¼zgÃ¼n olduÄŸunu doÄŸrulayÄ±n:
   ```bash
   npm test
   ```

## DeÄŸiÅŸiklik Yapma

1. `main` branch'inden bir feature branch oluÅŸturun:
   ```bash
   git checkout -b feature/your-feature-name
   ```
2. DeÄŸiÅŸikliklerinizi yapÄ±n
3. TÃ¼m testlerin geÃ§tiÄŸinden emin olun:
   ```bash
   npm test
   ```
4. AÃ§Ä±klayÄ±cÄ± bir PR gÃ¶nderin

## Commit MesajlarÄ±

Bu projede [Conventional Commits](https://www.conventionalcommits.org/) standardÄ±nÄ± kullanÄ±yoruz:

- `feat:` â€” Yeni Ã¶zellik
- `fix:` â€” Hata dÃ¼zeltme
- `docs:` â€” Sadece dokÃ¼mantasyon deÄŸiÅŸikliÄŸi
- `chore:` â€” Build, CI veya yardÄ±mcÄ± araÃ§ deÄŸiÅŸiklikleri
- `refactor:` â€” DavranÄ±ÅŸ deÄŸiÅŸtirmeyen kod yeniden yapÄ±landÄ±rmasÄ±
- `test:` â€” Test ekleme veya dÃ¼zeltme

Ã–rnek: `feat: add package manager selection prompt`

## Template DeÄŸiÅŸiklikleri

Template'lerde (`templates/web/` veya `templates/admin/`) deÄŸiÅŸiklik yaparken:

1. Template'in `.env` doldurulduktan sonra hatasÄ±z `npm run build` yapabildiÄŸini doÄŸrulayÄ±n
2. Yeni dependency ekliyorsanÄ±z, `package.json`'daki `engines` alanÄ±yla uyumlu olduÄŸunu kontrol edin
3. Yeni environment variable ekliyorsanÄ±z, `.env.example`'a aÃ§Ä±klayÄ±cÄ± bir yorum ile ekleyin

## CLI DeÄŸiÅŸiklikleri

`bin/cli.js`'te deÄŸiÅŸiklik yaparken:

1. TÃ¼m Ã¼Ã§ template tipi iÃ§in scaffold'un Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± test edin (web, admin, full-stack)
2. Interactive ve non-interactive (`--template` flag) modlarÄ± test edin
3. Mevcut testlerin geÃ§tiÄŸini doÄŸrulayÄ±n: `npm test`

## Hata RaporlarÄ±

[GitHub Issues](https://github.com/mburakaltiparmak/create-nextjs-stack/issues) Ã¼zerinden rapor edin. LÃ¼tfen ÅŸunlarÄ± belirtin:

- `create-nextjs-stack` versiyonu
- Node.js versiyonu
- Ä°ÅŸletim sistemi
- Hangi template tipini kullandÄ±ÄŸÄ±nÄ±z
- HatayÄ± tekrar Ã¼retme adÄ±mlarÄ±

## Lisans

KatkÄ± yaparak, katkÄ±larÄ±nÄ±zÄ±n [MIT LisansÄ±](./LICENSE) altÄ±nda lisanslanacaÄŸÄ±nÄ± kabul etmiÅŸ olursunuz.

```

### YapÄ±lacaklar

- [ ] Root dizine `CONTRIBUTING.md` oluÅŸtur
- [ ] `.npmignore`'a `!CONTRIBUTING.md` ekle (npm paketine dahil etmek istiyorsan)
- [ ] README.md'deki Contributing bÃ¶lÃ¼mÃ¼ne `CONTRIBUTING.md`'ye referans ekle

### Etkilenen Dosyalar

```

CONTRIBUTING.md â†’ YENÄ° DOSYA
.npmignore â†’ opsiyonel gÃ¼ncelleme
README.md â†’ baÄŸlantÄ± ekleme

```

---

## 7. Zod 3/4 Versiyon Ã‡akÄ±ÅŸmasÄ±nÄ± Ã‡Ã¶zme

### Sorun

`templates/web/package.json` â†’ `"zod": "^4.3.5"` kullanÄ±yor. Ancak `@cloudinary-util/url-loader` dependency'si kendi iÃ§inde `"zod": "^3.22.4"` gerektiriyor. Bu durum `node_modules` iÃ§inde iki farklÄ± Zod versiyonunun (3.x ve 4.x) bulunmasÄ±na yol aÃ§ar, bundle size'Ä± gereksiz artÄ±rÄ±r.

`package-lock.json`'da doÄŸrulanabilir:

```

node_modules/@cloudinary-util/url-loader/node_modules/zod â†’ 3.25.76
node_modules/zod â†’ 4.3.6

````

### Ã‡Ã¶zÃ¼m

Ä°ki seÃ§enek var:

**SeÃ§enek A (GÃ¼venli â€” Ã–nerilen):** Zod'u 3.x'e geri Ã§ek, next-cloudinary uyumunu koru:

```jsonc
// templates/web/package.json
{
  "dependencies": {
    "zod": "^3.25.0"     // Zod 3 son stable
  }
}
````

Bu durumda web template'indeki Zod 4'e Ã¶zel API kullanÄ±mlarÄ± varsa (Ã¶rneÄŸin `z.pipe()`, `z.brand()` gibi v4 exclusive API'ler) bunlarÄ± Zod 3 uyumlu hale getir.

**SeÃ§enek B (Ä°leriye dÃ¶nÃ¼k):** Zod 4'te kal, ama `next-cloudinary`'nin Zod 4 desteÄŸi gelene kadar nested zod'u kabul et.

### Karar Kriterleri

Template'deki form validation kodunu incele:

```bash
grep -r "from.*zod\|require.*zod" templates/web/src/
```

EÄŸer sadece basit `z.object()`, `z.string()`, `z.email()` gibi her iki versiyonda da Ã§alÄ±ÅŸan API'ler kullanÄ±lÄ±yorsa â†’ **SeÃ§enek A'yÄ± uygula**.

### YapÄ±lacaklar

- [ ] Template kaynak kodunda Zod kullanÄ±mÄ±nÄ± tara
- [ ] Zod 4'e Ã¶zel API kullanÄ±mÄ± var mÄ± kontrol et
- [ ] SeÃ§ilen seÃ§eneÄŸe gÃ¶re `templates/web/package.json`'daki `zod` versiyonunu gÃ¼ncelle
- [ ] `@hookform/resolvers` paketinin seÃ§ilen Zod versiyonuyla uyumlu olduÄŸunu doÄŸrula
- [ ] Template'de `npm install && npm run build` Ã§alÄ±ÅŸtÄ±rarak doÄŸrula

### Etkilenen Dosyalar

```
templates/web/package.json
templates/web/src/**/*         â†’ Zod import eden dosyalar (varsa)
```

---

## 8. CLI Error Handling Ä°yileÅŸtirmeleri

### Sorun

`bin/cli.js`'te:

- `catch` bloÄŸu sadece ham error objesini basÄ±yor â€” kullanÄ±cÄ± dostu deÄŸil
- Global SIGINT handler yok â€” Ctrl+C'de bazen stack trace basÄ±labiliyor
- Template tipi validasyonu CLI argÃ¼manlarÄ±nda yapÄ±lmÄ±yor (`--template invalid` kabul ediliyor)

### Ã‡Ã¶zÃ¼m

#### 8a. Graceful SIGINT Handler

```js
// bin/cli.js â€” dosyanÄ±n en Ã¼stÃ¼ne (program.parse()'dan Ã¶nce)
process.on("SIGINT", () => {
  console.log(chalk.red("\n\nOperation cancelled."));
  process.exit(1);
});
```

#### 8b. Template Tipi Validasyonu

```js
// program tanÄ±mÄ±nda, .action() Ã¶ncesine ekle:
.option(
  "-t, --template <type>",
  "Template type: web, admin, or full-stack"
)

// action callback'inin baÅŸÄ±nda:
const validTemplates = ["web", "admin", "full-stack"];
if (options.template && !validTemplates.includes(options.template)) {
  console.log(
    chalk.red(
      `\nInvalid template: "${options.template}"\n` +
        `Valid options: ${validTemplates.join(", ")}\n`
    )
  );
  process.exit(1);
}
```

#### 8c. KullanÄ±cÄ± Dostu Hata MesajlarÄ±

```js
// Mevcut catch bloÄŸunu deÄŸiÅŸtir:
} catch (error) {
  spinner.fail("Error scaffolding project.");

  if (error.code === "EACCES") {
    console.error(
      chalk.red("\nPermission denied. Try running with elevated privileges.")
    );
  } else if (error.code === "ENOSPC") {
    console.error(chalk.red("\nNo disk space available."));
  } else {
    console.error(chalk.red(`\n${error.message || error}`));
  }

  // Verbose hata sadece DEBUG modunda
  if (process.env.DEBUG) {
    console.error("\nFull error:", error);
  }

  process.exit(1);
}
```

### YapÄ±lacaklar

- [ ] SIGINT handler'Ä± ekle
- [ ] `--template` flag'i iÃ§in validasyon ekle
- [ ] Catch bloÄŸunu kullanÄ±cÄ± dostu mesajlarla gÃ¼ncelle
- [ ] `prompts` iptal durumlarÄ±nÄ± tutarlÄ± ÅŸekilde handle et (her prompts Ã§aÄŸrÄ±sÄ±ndan sonra `if (!res.value)` kontrolÃ¼)

### Etkilenen Dosyalar

```
bin/cli.js
```

---

## 9. Template'lere engines AlanÄ± Ekleme

### Sorun

Scaffold edilen projelerin `package.json`'unda `engines` alanÄ± yok. KullanÄ±cÄ± hangi Node.js versiyonuna ihtiyaÃ§ duyulduÄŸunu bilemiyor. AyrÄ±ca Vercel, Railway gibi deployment platformlarÄ± `engines` alanÄ±nÄ± okuyarak doÄŸru Node versiyonunu seÃ§er.

### Ã‡Ã¶zÃ¼m

Her iki template'in `package.json`'una ekle:

```jsonc
// templates/web/package.json
{
  "engines": {
    "node": ">=20.0.0"
  }
}

// templates/admin/package.json
{
  "engines": {
    "node": ">=20.0.0"
  }
}
```

### YapÄ±lacaklar

- [ ] `templates/web/package.json` â†’ `engines` ekle
- [ ] `templates/admin/package.json` â†’ `engines` ekle

### Etkilenen Dosyalar

```
templates/web/package.json
templates/admin/package.json
```

---

## 10. redux-logger Dependency TutarsÄ±zlÄ±ÄŸÄ±

### Sorun

CHANGELOG v0.1.4'te her iki template'e `redux-logger` middleware eklendiÄŸi belirtiliyor. Ancak `templates/admin/package.json`'da `redux-logger` dependency olarak gÃ¶rÃ¼nmÃ¼yor. Web template'in `package.json`'unda da gÃ¶rÃ¼nmÃ¼yor.

Bu iki durumdan biri sÃ¶z konusu:

1. Logger kodu var ama dependency yok â†’ runtime hatasÄ±
2. Logger dependency ve kodu sonradan kaldÄ±rÄ±ldÄ± ama CHANGELOG gÃ¼ncellenmedi

### Ã‡Ã¶zÃ¼m

```bash
# Her iki template'te de redux-logger kullanÄ±mÄ±nÄ± kontrol et:
grep -r "redux-logger" templates/web/src/
grep -r "redux-logger" templates/admin/
```

**EÄŸer kod kullanÄ±yorsa ama dependency yoksa:**

```jsonc
// Ä°lgili template'in package.json'Ä±na ekle:
{
  "devDependencies": {
    "redux-logger": "^3.0.6",
    "@types/redux-logger": "^3.0.13", // TypeScript projesi ise
  },
}
```

> **Not:** CHANGELOG v0.1.4'te `@types/redux-logger` kaldÄ±rÄ±ldÄ±ÄŸÄ± da yazÄ±yor. EÄŸer logger devDependency olarak ekliyorsak ve TypeScript kullanÄ±yorsak, tipi de gerekli. Burada dikkatli olunmalÄ±.

**EÄŸer kod da kaldÄ±rÄ±lmÄ±ÅŸsa:** TutarsÄ±zlÄ±k yok, sadece CHANGELOG'un aÃ§Ä±k olduÄŸunu doÄŸrula.

### YapÄ±lacaklar

- [ ] Her iki template'te `redux-logger` import/require kullanÄ±mÄ±nÄ± tara
- [ ] EÄŸer kullanÄ±lÄ±yorsa â†’ dependency ekle
- [ ] EÄŸer kullanÄ±lmÄ±yorsa â†’ kodu temizle, store config'den logger middleware'ini kaldÄ±r
- [ ] Sonucu doÄŸrula: `npm install && npm run build`

### Etkilenen Dosyalar

```
templates/web/package.json
templates/web/src/store/index.ts       â†’ logger import
templates/admin/package.json
templates/admin/store/index.ts         â†’ logger import
```

---

## 11. LICENSE DosyasÄ± DoÄŸrulamasÄ±

### Sorun

`.npmignore`'da `!LICENSE` satÄ±rÄ± var (npm paketine dahil et), README'de MIT lisansÄ± belirtilmiÅŸ, `package.json`'da `"license": "MIT"` var. Ancak `LICENSE` dosyasÄ±nÄ±n gerÃ§ekten mevcut olduÄŸu ve doÄŸru iÃ§eriÄŸe sahip olduÄŸu doÄŸrulanmalÄ±.

### Ã‡Ã¶zÃ¼m

Root dizinde `LICENSE` dosyasÄ±nÄ±n varlÄ±ÄŸÄ±nÄ± kontrol et. Yoksa oluÅŸtur:

```
MIT License

Copyright (c) 2026 Mehmet Burak AltÄ±parmak

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

### YapÄ±lacaklar

- [ ] `LICENSE` dosyasÄ±nÄ±n varlÄ±ÄŸÄ±nÄ± doÄŸrula
- [ ] YÄ±l ve isim bilgisinin doÄŸru olduÄŸunu kontrol et
- [ ] Yoksa oluÅŸtur

### Etkilenen Dosyalar

```
LICENSE
```

---

## 12. GitHub Issue ve PR Template'leri

### Sorun

GitHub Issue ve PR template'leri yok. Bu, hata raporlarÄ±nÄ±n ve Ã¶zellik isteklerinin tutarsÄ±z formatlarda gelmesine neden olur.

### Ã‡Ã¶zÃ¼m

`.github/` dizinine template dosyalarÄ± oluÅŸtur:

#### `.github/ISSUE_TEMPLATE/bug_report.yml`

```yaml
name: Bug Report
description: Report a bug in create-nextjs-stack
labels: ["bug", "triage"]
body:
  - type: input
    id: version
    attributes:
      label: Package Version
      description: "Run: npx create-nextjs-stack --version"
      placeholder: "0.2.0"
    validations:
      required: true

  - type: dropdown
    id: template
    attributes:
      label: Template Type
      options:
        - Web
        - Admin
        - Full-Stack
    validations:
      required: true

  - type: input
    id: node-version
    attributes:
      label: Node.js Version
      description: "Run: node --version"
      placeholder: "v20.11.0"
    validations:
      required: true

  - type: input
    id: os
    attributes:
      label: Operating System
      placeholder: "macOS 14.2 / Windows 11 / Ubuntu 24.04"
    validations:
      required: true

  - type: textarea
    id: description
    attributes:
      label: Bug Description
      description: What happened? What did you expect?
    validations:
      required: true

  - type: textarea
    id: reproduction
    attributes:
      label: Steps to Reproduce
      description: Minimal steps to reproduce the issue
      value: |
        1. Run `npx create-nextjs-stack my-app --template web`
        2. ...
        3. ...
    validations:
      required: true
```

#### `.github/ISSUE_TEMPLATE/feature_request.yml`

```yaml
name: Feature Request
description: Suggest an enhancement
labels: ["enhancement"]
body:
  - type: textarea
    id: problem
    attributes:
      label: Problem
      description: What problem does this solve?
    validations:
      required: true

  - type: textarea
    id: solution
    attributes:
      label: Proposed Solution
      description: How do you think this should work?
    validations:
      required: true
```

#### `.github/pull_request_template.md`

```markdown
## Description

<!-- What does this PR do? -->

## Type of Change

- [ ] Bug fix
- [ ] New feature
- [ ] Documentation update
- [ ] Refactoring

## Checklist

- [ ] I have tested all three template types (web, admin, full-stack)
- [ ] All existing tests pass (`npm test`)
- [ ] I have updated relevant documentation
- [ ] My commits follow Conventional Commits format
```

### YapÄ±lacaklar

- [ ] `.github/ISSUE_TEMPLATE/bug_report.yml` oluÅŸtur
- [ ] `.github/ISSUE_TEMPLATE/feature_request.yml` oluÅŸtur
- [ ] `.github/pull_request_template.md` oluÅŸtur

### Etkilenen Dosyalar

```
.github/ISSUE_TEMPLATE/bug_report.yml        â†’ YENÄ°
.github/ISSUE_TEMPLATE/feature_request.yml    â†’ YENÄ°
.github/pull_request_template.md              â†’ YENÄ°
```

---

## 13. DoÄŸrulama Checklist'i

TÃ¼m maddeler tamamlandÄ±ktan sonra, release Ã¶ncesi bu checklist'i uygula:

### Temel DoÄŸrulama

```bash
# 1. Temiz bir ortamda testleri Ã§alÄ±ÅŸtÄ±r
rm -rf node_modules
npm install
npm test

# 2. Web template scaffold + build
npx . test-web-app --template web
cd test-web-app
# .env dosyasÄ±nÄ± doldur
npm install
npm run build
cd .. && rm -rf test-web-app

# 3. Admin template scaffold + build
npx . test-admin-app --template admin
cd test-admin-app
# .env dosyasÄ±nÄ± doldur
npm install
npm run build
cd .. && rm -rf test-admin-app

# 4. Full-stack template scaffold
npx . test-full-stack --template full-stack
ls test-full-stack/web test-full-stack/admin
rm -rf test-full-stack

# 5. npm pack ile paket iÃ§eriÄŸini kontrol et
npm pack --dry-run
# Ã‡Ä±ktÄ±da sadece bin/, templates/, package.json, README.md, LICENSE olmalÄ±
# package-lock.json, node_modules, .env, .next, .git olmamalÄ±
```

### Versiyon ve Changelog

```bash
# 6. Versiyon tutarlÄ±lÄ±ÄŸÄ±
node -e "console.log(require('./package.json').version)"
# â†’ 0.2.0 olmalÄ±

# 7. CHANGELOG.md gÃ¼ncel mi?
# [0.2.0] tarih ve tÃ¼m deÄŸiÅŸiklikler yazÄ±lmÄ±ÅŸ olmalÄ±
# [unreleased] linki gÃ¼ncellenmeli

# 8. Git tag
git tag v0.2.0
git push origin v0.2.0
# Bu, publish.yml workflow'unu tetikleyecek
```

### CI/CD DoÄŸrulama

- [ ] CI workflow'da Node 18.x matrix'ten kaldÄ±rÄ±lmÄ±ÅŸ mÄ±?
- [ ] `npm test` CI'da geÃ§iyor mu?
- [ ] `npm pack --dry-run` Ã§Ä±ktÄ±sÄ±nda gereksiz dosya yok mu?

### Release SonrasÄ±

```bash
# FarklÄ± bir dizinde test et
mkdir /tmp/release-test && cd /tmp/release-test
npx create-nextjs-stack@0.2.0 my-app --template web
cd my-app
cat package.json  # name: "my-app" olmalÄ±
cat .env          # .env.example'dan kopyalanmÄ±ÅŸ olmalÄ±
```

---

## Ã–zet: DeÄŸiÅŸiklik HaritasÄ±

| #   | Madde                       | Ã–ncelik   | Etki                    | Dosyalar                                    |
| --- | --------------------------- | --------- | ----------------------- | ------------------------------------------- |
| 1   | Node.js engine uyumsuzluÄŸu  | ğŸ”´ Kritik | KullanÄ±cÄ± hatasÄ± Ã¶nleme | `package.json`, `README.md`, CI             |
| 2   | .env temizleme              | ğŸ”´ YÃ¼ksek | Ä°lk izlenim             | `templates/web/.env.example`, `README.md`   |
| 3   | package-lock.json kaldÄ±rma  | ğŸŸ¡ Orta   | Repo boyutu             | `templates/*/package-lock.json`             |
| 4   | Otomatik install            | ğŸŸ¡ Orta   | UX                      | `bin/cli.js`                                |
| 5   | package.json modernizasyonu | ğŸŸ¡ Orta   | npm standartlarÄ±        | `package.json`                              |
| 6   | CONTRIBUTING.md             | ğŸŸ¢ DÃ¼ÅŸÃ¼k  | Open source olgunluÄŸu   | `CONTRIBUTING.md`                           |
| 7   | Zod Ã§akÄ±ÅŸmasÄ±               | ğŸŸ¡ Orta   | Dependency saÄŸlÄ±ÄŸÄ±      | `templates/web/package.json`                |
| 8   | CLI error handling          | ğŸŸ¡ Orta   | UX                      | `bin/cli.js`                                |
| 9   | Template engines alanÄ±      | ğŸŸ¡ Orta   | Deployment uyumu        | `templates/*/package.json`                  |
| 10  | redux-logger tutarsÄ±zlÄ±ÄŸÄ±   | ğŸŸ¡ Orta   | Runtime hata Ã¶nleme     | `templates/*/package.json`, store dosyalarÄ± |
| 11  | LICENSE doÄŸrulama           | ğŸŸ¢ DÃ¼ÅŸÃ¼k  | Yasal uyum              | `LICENSE`                                   |
| 12  | GitHub templates            | ğŸŸ¢ DÃ¼ÅŸÃ¼k  | Topluluk katkÄ±sÄ±        | `.github/`                                  |
